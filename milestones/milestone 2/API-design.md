| Action                      | Input                                           | Preconditions                                                                                                                                                                             | Post Condition                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | API endpoint                                                                                                      |
|-----------------------------|-------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------|
| **1. Create Player**        | 1.name  2.username  3.email  4.password                   | 1. Email should be valid and not previously registered.                                                                                    | 1. Player is created.  (player_id and all other attributes associated with a player are created)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | POST /login  {name, username, email, password}                                                                          |
| **2. Create a Game**        | 1.player_id   2.game_id  3.max_player_count  4.created_at   | 1. game_title should be in a specified format. 2. count should be greater than 1.                                                                                                         | 1. A new game created (created a game_id) 2. User_id is set to the username 3. Player is redirected to the lobby waiting for other players 4. That game list in the global lobby is updated to include the new game 5. player_id is added to game_id 6. Player is redirected to the game room (or waiting room) on a new tab 7. A chatroom for the given game with the players is created with a chat_id.                                                                                                                                                                                                                                                                                                                                          | POST /games/create  {game_title, max_player_count}  (player_id is retrieved from the session)                     |
| **3. Join a game**          | 1.player_id  2.game_id                          | 1. Number of players in the game should be less than the count specified when the game was initialized.                                                                                   | 1.That game list in the global lobby is updated to include the updated information about the game 2.. player_id is added to game_id 3. Player is redirected to the game room (or waiting room) on a new tab 4. player_id is added to the chat_id.                                                                                                                                                                                                                                                                                                                                                                                                     | POST /games/:id/join  (game_id is provided in url, player_id is                                                   |
| **4. Start a game**         | 1.game_id                                       | 1. Count of players in the game should be greater than 1.                                                                                                                                 | 1. The game state is updated to being started. 2. Attributes like is_started, player_turn, top_deck, discard_pile_topare populated.  ( A randomized circular pattern of turns is established.                                                                                                                                                                                                                                                                                                                                                                                                                                                         | POST /games/:id/play  (game_id is provided in url)                                                                |
| **5. Play a card**          | 1. game_id 2.player_id 3.card_id                | 1. player_id is a player in game_id 2. it is player_id’s turn 3. player_id has card_id in their hand 4. playing card_id is a legal move ( check with the card on top of the discard pile) | 1. discard pile is updated with card_id 2. Check for the card type and update the player_turn accordingly.  3. If the card played is a skip or reverse change the next player turn or pattern of player turns.  4. If the card is a wild card make sure if the next player is given 4 cards. 5.Update the active_color of the game accordingly.  6. all users receive the updated game state (discard pile, number of cards in player_id’s hand 7.)If a player has less than 2 cards make sure that call_uno and uno buttons are active. 8. Updated game state is sent to all the players 9. If the current player is out of cards then end the game. | POST /games/:id/playcard  {card_id}   (game_id is provided in url, player_id is available in the session)         |
| **6.Draw a card from Deck** | 1.game_id 2.player_id                           | 1. player_id is a player in game_id 2. It is player_id’s turn 3. player_id with current player_turn does not have a playable card.                                                        | 1. The card_id is added to the player_id's card list.  2. If the current player still does not have a playable card then the player_turn is updated to the next player.  3. Updated game state and information about the number of cards of each player is sent to every other player.                                                                                                                                                                                                                                                                                                                                                                | POST /games/:id/draw  (game_id is provided in url, player_id is available in                                                        | POST /games/:id/callnouno  (game_id is provided in url, player_id is available in the session)                    |
| **7. Exit the game**        | 1. game_id 2.player_id                          | 1.player_Id should be in game_id.                                                                                                                                                         | 1. shuffle player_id's cards in the deck.  2. player_id should not be in game_id after the exit.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | POST /games/:id/exit  (game_id is provided in url, player_id is available in the session)                         |
| **8. Send a chat**      | 1. game_id 2. player_id 2. message 3. timestamp | 1.player_id should be in game_id                                                                                                                                                          | 1.Message is sent to the chat  2. updates const data with new id, username, timestamp    3. emits the chat_message recieved                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | POST /games/:id/message {message, timestamp}  (game_id is provided in url, player_id is available in the session) |
